{% extends 'partials/base.html'%}
{% block title %}Travel Log{% endblock %}
{% load crispy_forms_tags %}
{% block content %}
 <script type="text/javascript">
        window.onload = function() {
            let dist_tot = 0
            let cnt = 0;
            const dist_quer = document.querySelectorAll(".dist");
            console.log("value", dist_quer)
            dist_quer.forEach(d => {
                console.log("v ", d.innerHTML)
                dist_tot = dist_tot+parseInt(d.innerHTML);
            });
            console.log("dist ", dist_tot)
            dist_tot = dist_tot/1000;
            document.getElementById("id_tot_dist").textContent =  dist_tot;
        };
 </script>

<div class="container">
    <div class="row mt-5 pt-3">
        <div class="col-md-8">
            <div class="card my-3 shadow">
                <div class="card-body" style="text-align: center">
                    <div class="card my-3 shadow">
                        <div class="card-body" style="text-align: center">
                            <span class="title" id="dist_tit">Total Distance of all your trips:</span>
                            <br>
                            <a id="id_tot_dist"></a>KM
                        </div>
                    </div>
                    <a class="btn" href="{% url 'user_map' %}">
                        <span class="material-symbols-outlined">add_circle</span>
                    </a>
                </div>
            </div>
            {% for map in maps %}
            <div class="card shadow my-3">
                <div class="card-body">
                    <h5><a href="{% url 'planner-log-history' map.id %}">Trip: {{map.title}}</a></h5>
                    <hr>
                    <p>origin: {{map.orig_loc}}</p>
                    <p>destination: {{map.dest_loc}}</p>
                    distance: <p class="dist">{{map.distance}}</p>
                </div>
            </div>
            {% endfor %}
        </div>

    </div>
</div>
{% endblock %}

